<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【神戸元町】この夜だけは大人も遊んでいい｜オフまで5分</title>
    <meta name="description" content="神戸元町で開催される、大人のための懐かしい遊びイベント『オフまで5分』公式サイト。子供の頃に戻って、無邪気に遊びませんか？フードやドリンクもご用意しております。">
    <meta name="keywords" content="イベント, 神戸, 元町, 遊び, 大人, レトロ, オフまで5分">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="splash-screen">
        <img src="rogo.png" alt="ロゴ">
    </div>

    <div class="site-wrapper is-hidden">
        <header class="header">
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </header>
        <nav class="sp-nav" id="sp-nav">
            <ul>
                <li><a href="#hero">TOP</a></li>
                <li><a href="#concept">CONCEPT</a></li>
                <li><a href="#games">GAMES</a></li>
                <li><a href="#menu">MENU</a></li>
                <li><a href="#ticket">TICKET</a></li>
                <li><a href="#news">NEWS</a></li>
                <li><a href="#access">ACCESS</a></li>
                <li><a href="#instagram">INSTAGRAM</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </nav>

        <main>
            <section id="hero" class="hero">
                <div class="hero__title-group">
                    <img src="rogo.png" class="hero__subtitle-image" alt="オフまで5分">
                    <h1 class="hero__title">
                        <span>この夜だけは</span>
                        <span>大人も遊んでいい</span>
                    </h1>
                </div>
                <div class="hero__images">
                    <img src="wowman.png" alt="解放された女性" class="hero__image-woman">
                    <img src="man.png" alt="解放された男性" class="hero__image-man">
                </div>
            </section>

            <section id="concept" class="content-section">
                 <img src="mail2.png" alt="いつの間にか大人になってしまった、あなたへ" class="concept__mail-image">
            </section>

            <section id="games" class="content-section">
                <h2 class="section-title">懐かしの遊び</h2>
                <p class="section-subtitle">子供の頃、夢中になって遊んだ懐かしいゲームの数々。大人になった今だからこそ、あの頃の無邪気な気持ちに戻って本気で楽しもう。仲間と笑い合って、自然と心の距離が縮まります。</p>
                <div class="games__images">
                    <img src="toy1.jpg" alt="懐かしいおもちゃ1" class="games__image">
                    <img src="toy2.jpg" alt="懐かしいおもちゃ2" class="games__image">
                </div>
                <p class="games__note"><span class="highlight">詳細は当日のお楽しみ</span></p>
            </section>

            <section id="menu" class="content-section">
                <div class="food-section">
                    <h2 class="section-title">Food</h2>
                    <img src="food.1.png" alt="フードメニュー1" class="food-image">
                    <img src="food.2.png" alt="フードメニュー2" class="food-image">
                </div>
                <div class="drink-section">
                    <h2 class="section-title">Drink</h2>
                    <img src="dorink.a.png" alt="ドリンクメニュー1" class="food-image">
                    <img src="dorink.f.png" alt="ドリンクメニュー2" class="food-image">
                </div>
            </section>

            <section id="ticket" class="content-section">
                <h2 class="section-title">Ticket</h2>
                <a href="#" class="ticket-link">
                    <img src="ticket.png" alt="チケット購入はこちら" class="ticket-image">
                </a>
                <div class="ticket-notes">
                    <p>※バケットとクラッカーは食べ放題です。</p>
                    <p>※他のお客様のご迷惑にならない配慮をお願い致します。</p>
                    <p>※フード、ドリンクはそれぞれ一品ついてきます。</p>
                    <p>※お支払いは当日お願い致します。</p>
                </div>
            </section>

            <!-- ★★★ お知らせセクション ★★★ -->
            <section id="news" class="content-section">
                <h2 class="section-title">お知らせ</h2>
                <div id="news-list" class="news-list">
                    <p class="text-center text-gray-500">お知らせを読み込んでいます...</p>
                </div>
            </section>

            <section id="access" class="content-section">
                <h2 class="section-title">Access</h2>
                <p class="access-address">兵庫県神戸市中央区栄町通1-3-22</p>
                <p class="access-train">JR神戸線(大阪～神戸) 元町駅 徒歩5分<br>阪神本線 元町駅 徒歩5分</p>
                <div class="map-container">
                    <a href="https://maps.app.goo.gl/1HMt1BV6139dYrtx6" target="_blank" rel="noopener noreferrer">
                        <img src="mapillustration.png" alt="地図" class="map-image">
                    </a>
                </div>
                <div class="access-photos">
                    <img src="eventspace1.jpg" alt="イベントスペースの外観" class="access-photo">
                    <img src="eventspace2.png" alt="イベントスペースの内観" class="access-photo">
                </div>
            </section>

            <section id="instagram" class="content-section">
                <h2 class="section-title">INSTAGRAM</h2>
                <div class="instagram-grid">
                    <!-- この部分にInstagramの埋め込みコードを3つ貼り付けます -->
                    <!-- 例: <div class="instagram-post">[埋め込みコード]</div> -->
                </div>
            </section>
            
            <section id="faq" class="content-section">
                <img src="Q&Atest.png" alt="よくある質問" class="faq-image">
            </section>
            
            <footer class="footer">
                <div class="contact-section">
                    <h2 class="section-title contact-title">お問い合わせ先</h2>
                    <div class="contact-body">
                         <p>お問い合わせは公式Instagramまたは</p>
                         <p>問い合わせまでお願いします</p>
                         <p class="contact-username">@off5_minute</p>
                         <a href="https://www.instagram.com/jiji_net?igsh=ZGNremJ5NnkxOGRq&utm_source=qr" target="_blank" rel="noopener noreferrer" class="contact-icon-link">
                            <img src="insta.png" alt="Instagram" class="contact-icon">
                         </a>
                         <a href="#" class="contact-button">問い合わせ</a>
                    </div>
                </div>
                <div class="inquiry-section">
                     <h2 class="section-title">資料請求</h2>
                     <p>イベントやサービスに関する詳しい資料をご希望の方はこちらからお問い合わせください。</p>
                     <a href="http://jijilogic.com/information.github.io/" class="inquiry-button">資料請求フォームへ</a>
                </div>
            </footer>
        </main>
    </div>

    <script src="script.js"></script>
    
    <!-- Firebase お知らせ機能のためのスクリプト -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : { apiKey: "DUMMY_KEY", authDomain: "DUMMY_DOMAIN", projectId: "DUMMY_PROJECT_ID" };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        const signIn = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Authentication failed:", error);
            }
        };

        const newsListContainer = document.getElementById('news-list');
        const postsCollectionRef = collection(db, `artifacts/${appId}/public/data/posts`);

        const getNews = () => {
            const q = query(postsCollectionRef, orderBy("createdAt", "desc"), limit(5)); // 最新5件を取得

            onSnapshot(q, (snapshot) => {
                if (snapshot.empty) {
                    newsListContainer.innerHTML = '<p class="text-center text-gray-500">まだお知らせはありません。</p>';
                    return;
                }
                
                newsListContainer.innerHTML = '';
                
                snapshot.forEach(doc => {
                    const post = doc.data();
                    const newsItem = document.createElement('a');
                    newsItem.classList.add('news-item');
                    // 各お知らせ記事のページにIDを渡してリンクを生成します
                    newsItem.href = `post.html?id=${doc.id}`;

                    const postDate = post.createdAt ? new Date(post.createdAt.seconds * 1000).toLocaleDateString('ja-JP') : '';
                    
                    newsItem.innerHTML = `
                        <span class="news-date">${escapeHTML(postDate)}</span>
                        <span class="news-title">${escapeHTML(post.title)}</span>
                    `;
                    newsListContainer.appendChild(newsItem);
                });
            }, (error) => {
                console.error("お知らせの取得中にエラー:", error);
                newsListContainer.innerHTML = '<p class="text-center text-red-500">お知らせの読み込みに失敗しました。</p>';
            });
        };

        const escapeHTML = (str) => {
            if (!str) return '';
            return str.replace(/[&<>"']/g, (match) => ({'&': '&amp;','<': '&lt;','>': '&gt;','"': '&quot;',"'": '&#39;'})[match]);
        };

        const startApp = async () => {
            await signIn();
            if (auth.currentUser) {
                getNews();
            }
        };
        
        startApp();
    </script>
</body>
</html>

